\hypertarget{Generator_2Mysql_2Table_8php}{\section{Table.\-php}
\label{Generator_2Mysql_2Table_8php}\index{Db/\-Schema/\-Generator/\-Mysql/\-Table.\-php@{Db/\-Schema/\-Generator/\-Mysql/\-Table.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{Generator_2Mysql_2Table_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table}{ZendDbSchema\_Db\_Schema\_Generator\_Mysql\_Table}
00030     \textcolor{keyword}{implements} \hyperlink{interfaceZendDbSchema__Db__Schema__Generator__Table}{ZendDbSchema\_Db\_Schema\_Generator\_Table}
00031 \{
\hypertarget{Generator_2Mysql_2Table_8php_source_l00038}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab84f42f89ccbecc8a929d68340411907}{00038}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab84f42f89ccbecc8a929d68340411907}{createTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00039     \{
00040         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00041 
00042         $engine = $schema->engine;
00043         \textcolor{keywordflow}{if} ($engine) \{
00044             $engine = \textcolor{stringliteral}{"ENGINE=\{$engine\}"};
00045         \}
00046 
00047         $charset = $schema->charset;
00048         \textcolor{keywordflow}{if} ($charset) \{
00049             $charset = \textcolor{stringliteral}{"DEFAULT CHARSET=\{$charset\}"};
00050         \}
00051 
00052         $query = array();
00053         \textcolor{keywordflow}{foreach} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a214354faa96de67a26b787c2c8741850}{columns}() as $column) \{
00054             $query[] = $column->toSql();
00055         \}
00056 
00057         $query = array\_filter($query);
00058         $query = join(\textcolor{stringliteral}{', '} . PHP\_EOL, $query);
00059 
00060         $query = \textcolor{stringliteral}{"DROP TABLE IF EXISTS `\{$name\}`;"} . PHP\_EOL
00061                . \textcolor{stringliteral}{"CREATE TABLE `\{$name\}` ("} . PHP\_EOL
00062                . $query . PHP\_EOL
00063                . \textcolor{stringliteral}{") \{$engine\} \{$charset\}"};
00064 
00065         \textcolor{keywordflow}{return} $query;
00066     \}
00067 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00074}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab073dc755f15a13bd94772846df4249c}{00074}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab073dc755f15a13bd94772846df4249c}{alterTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00075     \{
00076         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00077             \textcolor{keywordflow}{return} null;
00078         \}
00079 
00080         $props = array();
00081         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(\textcolor{stringliteral}{'engine'})) \{
00082             $props[] = \textcolor{stringliteral}{"ENGINE=\{$schema->engine\}"};
00083         \}
00084 
00085         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(\textcolor{stringliteral}{'charset'})) \{
00086             $props[] = \textcolor{stringliteral}{"DEFAULT CHARSET=\{$schema->charset\}"};
00087         \}
00088 
00089         $props = array\_filter($props);
00090         $props = join(\textcolor{stringliteral}{', '} . PHP\_EOL, $props);
00091 
00092         $query = array();
00093 
00094         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00095         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(ZendDbSchema\_Db\_Schema\_Table::NAME\_KEY)) \{
00096             $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00097             \textcolor{keywordflow}{if} ($oldName && $oldName != $name) \{
00098                 $query[] = \textcolor{stringliteral}{"RENAME TABLE `\{$oldName\}` TO `\{$name\}`"};
00099             \}
00100         \}
00101         \textcolor{keywordflow}{if} ($props) \{
00102             $query[] = \textcolor{stringliteral}{"ALTER TABLE `\{$name\}` \{$props\}"};
00103         \}
00104 
00105         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00106     \}
00107 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00114}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a83d5cec1c67e8961773da5a47d213301}{00114}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a83d5cec1c67e8961773da5a47d213301}{dropTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00115     \{
00116         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00117             \textcolor{keywordflow}{return} null;
00118         \}
00119         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"DROP TABLE IF EXISTS \{$schema->getOriginName()\}"};
00120     \}
00121 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00128}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a86ed47276429129c5962489dcd370e0e}{00128}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a86ed47276429129c5962489dcd370e0e}{\_columnSql}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00129     \{
00130         $query = array();
00131 
00132         $query[] = $schema->type . \textcolor{stringliteral}{"(\{$schema->length\})"};
00133 
00134         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Column_aeeed5820cfc4fac67507a196e9faa638}{isNullable}()) \{
00135             $query[] = \textcolor{stringliteral}{"NOT NULL"};
00136         \} elseif (null === $schema->default) \{
00137 
00138             $query[] = \textcolor{stringliteral}{"DEFAULT NULL"};
00139         \}
00140 
00141         \textcolor{keywordflow}{if} (null !== $schema->default) \{
00142             $query[] = \textcolor{stringliteral}{"DEFAULT \{$schema->default\}"};
00143         \}
00144 
00145         $query[] = \textcolor{stringliteral}{"COMMENT '\{$schema->comment\}'"};
00146 
00147         \textcolor{keywordflow}{if} (\textcolor{keyword}{false} === $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Column_a49887d783c47fa509e229ca61dd113ef}{isSigned}()) \{
00148             $query[] = \textcolor{stringliteral}{"UNSIGNED"};
00149         \} elseif (\textcolor{keyword}{true} === $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Column_a49887d783c47fa509e229ca61dd113ef}{isSigned}()) \{
00150             $query[] = \textcolor{stringliteral}{"SIGNED"};
00151         \}
00152 
00153         \textcolor{keywordflow}{if} ($schema->autoincrement) \{
00154             $query[] = \textcolor{stringliteral}{"AUTO\_INCREMENT"};
00155         \}
00156 
00157         \textcolor{keywordflow}{if} ($schema->after) \{
00158             $query[] = \textcolor{stringliteral}{"AFTER \{$schema->after\}"};
00159         \}
00160 
00161         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{' '}, $query);
00162     \}
00163 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00170}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_adaf38c64fd149c2a51273e1485fc3202}{00170}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_adaf38c64fd149c2a51273e1485fc3202}{createColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{
      ZendDbSchema\_Db\_Schema\_Table\_Column} $schema)
00171     \{
00172         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00173         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"`\{$name\}`"} . \textcolor{charliteral}{' '} . $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a86ed47276429129c5962489dcd370e0e}{\_columnSql}($schema);
00174     \}
00175 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00182}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_aa8814727b4633316559e8865c62d9146}{00182}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_aa8814727b4633316559e8865c62d9146}{alterColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00183     \{
00184         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->isExist() || !$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a92b77fa23ce49db1c39edcc583ec6cfe}{isDirty}
      ()) \{
00185             \textcolor{keywordflow}{return} null;
00186         \}
00187         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00188 
00189         $query = array();
00190         $query[] = \textcolor{stringliteral}{"ALTER TABLE `\{$schema->getTable()->getName()\}`"};
00191 
00192         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00193             $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00194             \textcolor{keywordflow}{if} ($oldName && $oldName != $name) \{
00195                 $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00196                 $query[] = \textcolor{stringliteral}{"CHANGE `\{$name\}` `\{$oldName\}`"};
00197             \} \textcolor{keywordflow}{else} \{
00198                 $query[] = \textcolor{stringliteral}{"MODIFY `\{$name\}`"};
00199             \}
00200         \} \textcolor{keywordflow}{else} \{
00201             $query[] = \textcolor{stringliteral}{"ADD `\{$name\}`"};
00202         \}
00203 
00204         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{' '}, $query) . \textcolor{charliteral}{' '} . $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a86ed47276429129c5962489dcd370e0e}{\_columnSql}($schema);
00205     \}
00206 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00213}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab5b645cc129983ace2e90cdf48b59de3}{00213}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab5b645cc129983ace2e90cdf48b59de3}{dropColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00214     \{
00215         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00216         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00217 
00218         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"ALTER TABLE \{$table\} DROP COLUMN \{$name\}"};
00219     \}
00220 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00227}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab62df69dc345afb27186d6eecc66e753}{00227}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab62df69dc345afb27186d6eecc66e753}{createIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00228     \{
00229         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00230         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00231 
00232         $columns = \textcolor{stringliteral}{""};
00233         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Index_ad0edf2869c08ce408566798f4305b8dc}{getColumns}()) \{
00234             $columns = \textcolor{stringliteral}{"("} . join(\textcolor{stringliteral}{', '}, $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Index_ad0edf2869c08ce408566798f4305b8dc}{getColumns}()) . \textcolor{stringliteral}{")"};
00235         \}
00236         $type = strtoupper($schema->type);
00237 
00238         $query = array();
00239         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00240             $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_acb80829a10a192635417efba5b9d5439}{dropIndex}($schema);
00241         \}
00242         $query[] = \textcolor{stringliteral}{"CREATE \{$type\} INDEX `\{$name\}` ON `\{$table\}` \{$columns\}"};
00243 
00244         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00245     \}
00246 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00253}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a60e78ff04eba0a328b1df8ff7abbcd04}{00253}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a60e78ff04eba0a328b1df8ff7abbcd04}{alterIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00254     \{
00255         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab62df69dc345afb27186d6eecc66e753}{createIndex}($schema);
00256     \}
00257 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00264}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_acb80829a10a192635417efba5b9d5439}{00264}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_acb80829a10a192635417efba5b9d5439}{dropIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00265     \{
00266         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00267         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00268 
00269         $query = \textcolor{stringliteral}{"DROP INDEX IF EXISTS `\{$name\}` ON `\{$table\}`"};
00270         \textcolor{keywordflow}{return} $query;
00271     \}
00272 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00279}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a9daf95057d9d7a294b6ef45487818503}{00279}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a9daf95057d9d7a294b6ef45487818503}{addPrimaryKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey} 
      $schema)
00280     \{
00281         $columns = join(\textcolor{stringliteral}{', '}, $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}());
00282         $table = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00283 
00284         $query = \textcolor{stringliteral}{"ALTER TABLE `\{$table\}` ADD PRIMARY KEY (\{$columns\})"};
00285 
00286         \textcolor{keywordflow}{return} $query;
00287     \}
00288 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00295}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ade1a7272ca13e357fed6a1f96179bb8c}{00295}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ade1a7272ca13e357fed6a1f96179bb8c}{alterPrimaryKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey} 
      $schema)
00296     \{
00297         $query = array();
00298         $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a8204749fa41366650dee5e3e3d9fac03}{dropPrimaryKey}($schema);
00299         $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a9daf95057d9d7a294b6ef45487818503}{addPrimaryKey}($schema);
00300 
00301         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00302     \}
00303 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00310}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a8204749fa41366650dee5e3e3d9fac03}{00310}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a8204749fa41366650dee5e3e3d9fac03}{dropPrimaryKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey} 
      $schema)
00311     \{
00312         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00313 
00314         $query = \textcolor{stringliteral}{"ALTER TABLE `\{$table\}` DROP PRIMARY KEY"};
00315         \textcolor{keywordflow}{return} $query;
00316     \}
00317 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00324}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab0e8de60124040b8a92e5c9f3e2d63d0}{00324}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab0e8de60124040b8a92e5c9f3e2d63d0}{addForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00325     \{
00326         $query = array();
00327 
00328         \textcolor{keywordflow}{if} ($name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}()) \{
00329             $query[] = \textcolor{stringliteral}{"CONSTRAINT \{$name\}"};
00330         \}
00331 
00332         $columns = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}();
00333 
00334         $refColumns = join(\textcolor{stringliteral}{'`,`'}, array\_values($columns));
00335         $columns = join(\textcolor{stringliteral}{'`,`'}, array\_keys($columns));
00336         $refTable = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a39c9a3febcb98b77692566eed81220c7}{getReferences}();
00337 
00338         $query[] = \textcolor{stringliteral}{" FOREIGN KEY (`\{$columns\}`) REFERENCES `\{$refTable\}`
       (`\{$refColumns\}`)"};
00339 
00340         \textcolor{keywordflow}{if} ($delete = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a83644a5b874f111e17dbf08ffa3ea803}{getOnDelete}()) \{
00341             $query[] = \textcolor{stringliteral}{" ON DELETE \{$delete\}"};
00342         \}
00343         \textcolor{keywordflow}{if} ($update = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb55f45baab8357ce8c295e4d71bf700}{getOnUpdate}()) \{
00344             $query[] = \textcolor{stringliteral}{" ON UPDATE \{$update\}"};
00345         \}
00346 
00347         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00348 
00349         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"ALTER TABLE `\{$table\}` ADD "} . join(\textcolor{charliteral}{' '}, $query);
00350     \}
00351 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00358}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a3b806bcbce70989120035d56ee12071c}{00358}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_a3b806bcbce70989120035d56ee12071c}{alterForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00359     \{
00360         $query = array();
00361         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00362             $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_aa5d8bf2e4379b7acc7bcd57ea36e23ba}{dropForeignKey}($schema);
00363         \}
00364         $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_ab0e8de60124040b8a92e5c9f3e2d63d0}{addForeignKey}($schema);
00365         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00366     \}
00367 
\hypertarget{Generator_2Mysql_2Table_8php_source_l00374}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_aa5d8bf2e4379b7acc7bcd57ea36e23ba}{00374}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Table_aa5d8bf2e4379b7acc7bcd57ea36e23ba}{dropForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00375     \{
00376         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00377         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00378 
00379         $query = \textcolor{stringliteral}{"ALTER TABLE `\{$table\}` DROP FOREIGN KEY \{$name\}"};
00380         \textcolor{keywordflow}{return} $query;
00381     \}
00382 \}
\end{DoxyCode}

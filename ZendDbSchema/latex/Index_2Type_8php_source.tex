\hypertarget{Index_2Type_8php}{\section{Type.\-php}
\label{Index_2Type_8php}\index{Validate/\-Db/\-Schema/\-Table/\-Mysql/\-Index/\-Type.\-php@{Validate/\-Db/\-Schema/\-Table/\-Mysql/\-Index/\-Type.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{Index_2Type_8php_source_l00029}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__Table__Mysql__Index__Type}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Validate__Db__Schema__Table__Mysql__Index__Type}{ZendDbSchema\_Validate\_Db\_Schema\_Table\_Mysql\_Index\_Type}
00030     \textcolor{keyword}{extends} Zend\_Validate\_Abstract
00031 \{
00032     \textcolor{keyword}{const} NAME\_EMPTY = \textcolor{stringliteral}{'indexTypeEmpty'};
00033     \textcolor{keyword}{const} RENAME     = \textcolor{stringliteral}{'indexTypeRename'};
00034     \textcolor{keyword}{const} INVALID    = \textcolor{stringliteral}{'indexTypeInvalid'};
00035 
00039     \textcolor{keyword}{protected} $\_messageTemplates = array(
00040         self::NAME\_EMPTY => \textcolor{stringliteral}{"Index type can not be empty"},
00041         self::INVALID    => \textcolor{stringliteral}{"Index type %value% is not a valid type"},
00042         self::RENAME     => \textcolor{stringliteral}{"Cannot change type of existing index"}
00043     );
00044 
00048     \textcolor{keyword}{protected} $\_indexesTypes = array(
00049         \textcolor{stringliteral}{'FULLTEXT'},
00050         \textcolor{stringliteral}{'UNIQUE'}
00051     );
00052 
\hypertarget{Index_2Type_8php_source_l00059}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__Table__Mysql__Index__Type_ae51b8f5ac372f81546ed0f1cb2cfb070}{00059}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Validate__Db__Schema__Table__Mysql__Index__Type_ae51b8f5ac372f81546ed0f1cb2cfb070}{isValid}($value)
00060     \{
00061         $schema = null;
00062         \textcolor{keywordflow}{if} ($value instanceof \hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
      ) \{
00063             $schema = $value;
00064             $value = $schema->\_\_get(\textcolor{stringliteral}{'type'});
00065         \}
00066         \textcolor{keywordflow}{if} (empty($value)) \{
00067             $this->\_error(self::NAME\_EMPTY);
00068             \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00069         \}
00070         \textcolor{keywordflow}{if} ($schema && $schema->isDirty(\textcolor{stringliteral}{'type'})) \{
00071             \textcolor{keywordflow}{if} ($schema->isExist()) \{
00072                 $this->\_error(self::RENAME, $value);
00073                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00074             \}
00075             \textcolor{keywordflow}{if} (!in\_array(strtoupper($value), $this->\_indexesTypes)) \{
00076                 $this->\_error(self::INVALID, $value);
00077                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00078             \}
00079         \}
00080         \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00081     \}
00082 \}
\end{DoxyCode}

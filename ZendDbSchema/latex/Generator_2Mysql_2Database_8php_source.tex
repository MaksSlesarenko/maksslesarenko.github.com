\hypertarget{Generator_2Mysql_2Database_8php}{\section{Database.\-php}
\label{Generator_2Mysql_2Database_8php}\index{Db/\-Schema/\-Generator/\-Mysql/\-Database.\-php@{Db/\-Schema/\-Generator/\-Mysql/\-Database.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{Generator_2Mysql_2Database_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database}{ZendDbSchema\_Db\_Schema\_Generator\_Mysql\_Database}
00030     \textcolor{keyword}{implements} \hyperlink{interfaceZendDbSchema__Db__Schema__Generator__Database}{ZendDbSchema\_Db\_Schema\_Generator\_Database}
00031 \{
\hypertarget{Generator_2Mysql_2Database_8php_source_l00038}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a8d037ca19f7ac5d045fe2d9babe004c6}{00038}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a8d037ca19f7ac5d045fe2d9babe004c6}{createDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{
      ZendDbSchema\_Db\_Schema\_Database} $schema)
00039     \{
00040         $props = array();
00041 
00042         \textcolor{keywordflow}{if} ($schema->collate) \{
00043             $props[] = \textcolor{stringliteral}{"COLLATE "} . $schema->collate;
00044         \}
00045         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}()) \{
00046             $props[] = \textcolor{stringliteral}{"DEFAULT CHARACTER SET "} . $schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}
      ();
00047         \}
00048 
00049         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00050 
00051         $query = array();
00052         $query[] = \textcolor{stringliteral}{"DROP DATABASE IF EXISTS `\{$name\}`"};
00053         $query[] = \textcolor{stringliteral}{"CREATE DATABASE `\{$name\}` "} . join(\textcolor{charliteral}{' '}, $props);
00054 
00055         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00056     \}
00057 
\hypertarget{Generator_2Mysql_2Database_8php_source_l00064}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a98cc5d4cbab5e5c8b32d7b02fa9cb0dc}{00064}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a98cc5d4cbab5e5c8b32d7b02fa9cb0dc}{alterDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{ZendDbSchema\_Db\_Schema\_Database}
       $schema)
00065     \{
00066         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00067             \textcolor{keywordflow}{return} null;
00068         \}
00069 
00070         $props = array();
00071         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{isDirty}(\textcolor{stringliteral}{'collate'})) \{
00072             $props[] = \textcolor{stringliteral}{"COLLATE "} . $schema->collate;
00073         \}
00074         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}()) \{
00075             $props[] = \textcolor{stringliteral}{"DEFAULT CHARACTER SET "} . $schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}
      ();
00076         \}
00077 
00078         $query = \textcolor{stringliteral}{''};
00079         \textcolor{keywordflow}{if} (!empty($props)) \{
00080             $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00081             $query = \textcolor{stringliteral}{"ALTER DATABASE `\{$name\}` "}.  join(\textcolor{charliteral}{' '}, $props);
00082         \}
00083         \textcolor{keywordflow}{return} $query;
00084     \}
00085 
\hypertarget{Generator_2Mysql_2Database_8php_source_l00092}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a94a1d9e8d2eaa3740bd9b62cc3a8973e}{00092}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Mysql__Database_a94a1d9e8d2eaa3740bd9b62cc3a8973e}{dropDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{ZendDbSchema\_Db\_Schema\_Database}
       $schema)
00093     \{
00094         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00095             \textcolor{keywordflow}{return} null;
00096         \}
00097         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"DROP DATABASE IF EXISTS \{$schema->getOriginName()\}"};
00098     \}
00099 \}
\end{DoxyCode}

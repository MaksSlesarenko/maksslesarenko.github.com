\hypertarget{Generator_2Pgsql_2Database_8php}{\section{Database.\-php}
\label{Generator_2Pgsql_2Database_8php}\index{Db/\-Schema/\-Generator/\-Pgsql/\-Database.\-php@{Db/\-Schema/\-Generator/\-Pgsql/\-Database.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{Generator_2Pgsql_2Database_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database}{ZendDbSchema\_Db\_Schema\_Generator\_Pgsql\_Database}
00030     \textcolor{keyword}{implements} \hyperlink{interfaceZendDbSchema__Db__Schema__Generator__Database}{ZendDbSchema\_Db\_Schema\_Generator\_Database}
00031 \{
\hypertarget{Generator_2Pgsql_2Database_8php_source_l00038}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_a0a232123d02ab149db3309430ad8661e}{00038}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_a0a232123d02ab149db3309430ad8661e}{createDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{
      ZendDbSchema\_Db\_Schema\_Database} $schema)
00039     \{
00040         $props = array();
00041 
00042         \textcolor{keywordflow}{if} ($schema->owner) \{
00043             $props[] = \textcolor{stringliteral}{"OWNER \{$schema->owner\}"};
00044         \}
00045         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}()) \{
00046             $props[] = \textcolor{stringliteral}{"ENCODING "} . $schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}();
00047         \}
00048 
00049         \textcolor{keywordflow}{if} ($schema->template) \{
00050             $props[] = \textcolor{stringliteral}{"TEMPLATE \{$schema->template\}"};
00051         \}
00052 
00053         \textcolor{keywordflow}{if} ($schema->tablespace) \{
00054             $props[] = \textcolor{stringliteral}{"TABLESPACE \{$schema->tablespace\}"};
00055         \}
00056 
00057         \textcolor{keywordflow}{if} ($schema->connlimit) \{
00058             $props[] = \textcolor{stringliteral}{"CONNECTION LIMIT \{$schema->connlimit\}"};
00059         \}
00060 
00061         $name    = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00062         $query = array();
00063         $query[] = \textcolor{stringliteral}{"DROP DATABASE IF EXISTS \{$name\}"};
00064         $query[] = \textcolor{stringliteral}{"CREATE DATABASE \{$name\} "} . join(\textcolor{charliteral}{' '}, $props);
00065 
00066         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00067     \}
00068 
\hypertarget{Generator_2Pgsql_2Database_8php_source_l00075}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_a4d4b5c6abc51a4ab72fc480602f502c3}{00075}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_a4d4b5c6abc51a4ab72fc480602f502c3}{alterDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{ZendDbSchema\_Db\_Schema\_Database}
       $schema)
00076     \{
00077         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00078             \textcolor{keywordflow}{return} null;
00079         \}
00080 
00081         $props = array();
00082         \textcolor{keywordflow}{if} ($schema->template) \{
00083             $props[] = \textcolor{stringliteral}{"ENCODING \{$schema->template\}"};
00084         \}
00085 
00086         \textcolor{keywordflow}{if} ($schema->tablespace) \{
00087             $props[] = \textcolor{stringliteral}{"TABLESPACE \{$schema->tablespace\}"};
00088         \}
00089 
00090         \textcolor{keywordflow}{if} ($schema->connlimit) \{
00091             $props[] = \textcolor{stringliteral}{"CONNECTION LIMIT \{$schema->connlimit\}"};
00092         \}
00093 
00094         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00095 
00096         $query = \textcolor{stringliteral}{''};
00097         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{isDirty}(\textcolor{stringliteral}{'charset'})) \{
00098             $charset = $schema->\hyperlink{classZendDbSchema__Db__Schema__Database_a71126f98bb7da60fcd0ac00c101467c8}{getCharset}();
00099             $query = \textcolor{stringliteral}{"ALTER DATABASE \{$name\} DEFAULT CHARACTER SET \{$charset\}"};
00100         \}
00101         \textcolor{keywordflow}{return} $query;
00102     \}
00103 
\hypertarget{Generator_2Pgsql_2Database_8php_source_l00110}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_ad5abe9239fea98c39605aeb77f6ca268}{00110}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Database_ad5abe9239fea98c39605aeb77f6ca268}{dropDatabase}(\hyperlink{classZendDbSchema__Db__Schema__Database}{ZendDbSchema\_Db\_Schema\_Database}
       $schema)
00111     \{
00112         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00113             \textcolor{keywordflow}{return} null;
00114         \}
00115         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"DROP DATABASE IF EXISTS \{$schema->getOriginName()\}"};
00116     \}
00117 \}
\end{DoxyCode}

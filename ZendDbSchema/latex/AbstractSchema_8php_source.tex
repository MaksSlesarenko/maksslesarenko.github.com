\hypertarget{AbstractSchema_8php}{\section{Abstract\-Schema.\-php}
\label{AbstractSchema_8php}\index{Db/\-Schema/\-Abstract\-Schema.\-php@{Db/\-Schema/\-Abstract\-Schema.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{AbstractSchema_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema}{00029} \textcolor{keyword}{abstract} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema}{ZendDbSchema\_Db\_Schema\_AbstractSchema}
00030     \textcolor{keyword}{implements} IteratorAggregate
00031 \{
00032     \textcolor{keyword}{const} NAME\_KEY = \textcolor{stringliteral}{'name'};
00033 
00039     \textcolor{keyword}{protected} $\_params = array();
00040 
00044     \textcolor{keyword}{protected} $\_name;
00045 
00051     \textcolor{keyword}{abstract} \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_af99e5bb9adfe0da8c94d3d3848efe7b5}{\_getCleanSchema}();
00052 
00058     \textcolor{keyword}{abstract} \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a2b880c7261b3f4b988f1a2b74e188c75}{\_getAlterSql}();
00059 
00065     \textcolor{keyword}{abstract} \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a52321b7526257809f382a28a96ab562e}{\_getCreateSql}();
00066 
00072     \textcolor{keyword}{abstract} \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abf887d2836071992af679430ddf1b922}{\_getDropSql}();
00073 
\hypertarget{AbstractSchema_8php_source_l00079}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{00079}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()
00080     \{
00081         $schema = $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}();
00082         \textcolor{keywordflow}{return} !empty($schema);
00083     \}
00084 
\hypertarget{AbstractSchema_8php_source_l00091}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{00091}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{isDirty}($param = null)
00092     \{
00093         $clean = $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}();
00094 
00095         \textcolor{keywordflow}{if} ($param) \{
00096             \textcolor{keywordflow}{if} (!array\_key\_exists($param, $clean)) \{
00097                 \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ac4e121ba7932163eb1950fabe06fb9db}{\_\_isset}($param);
00098             \}
00099             \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}($param) != $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}
      ($param);
00100         \}
00101 
00102         \textcolor{keywordflow}{if} (count($clean) != count($this->\_params)) \{
00103             \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00104         \}
00105         \textcolor{keywordflow}{foreach} ($this->\_params as $paramName => $paramValue) \{
00106             \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{isDirty}($paramName)) \{
00107                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00108             \}
00109         \}
00110 
00111         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00112     \}
00113 
\hypertarget{AbstractSchema_8php_source_l00120}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{00120}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}($param = null)
00121     \{
00122         $schema = $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_af99e5bb9adfe0da8c94d3d3848efe7b5}{\_getCleanSchema}();
00123         \textcolor{keywordflow}{if} ($param) \{
00124             \textcolor{keywordflow}{if} (isset($schema[$param])) \{
00125                 \textcolor{keywordflow}{return} $schema[$param];
00126             \}
00127             \textcolor{keywordflow}{return} null;
00128         \}
00129         \textcolor{keywordflow}{return} $schema;
00130     \}
00131 
\hypertarget{AbstractSchema_8php_source_l00138}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a84673a5d69f10fec5b31294bf53f6d56}{00138}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a84673a5d69f10fec5b31294bf53f6d56}{refresh}($param = null)
00139     \{
00140         \textcolor{keywordflow}{if} ($param) \{
00141             $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{\_\_set}($param, $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}(
      $param));
00142         \} \textcolor{keywordflow}{else} \{
00143             $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_acd81590f02c831ff4c4a442c5cf47074}{setFromArray}($this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a46da7a60c7e5fd605607afbc1dac4baa}{getCleanSchema}
      ());
00144         \}
00145         \textcolor{keywordflow}{return} $this;
00146     \}
00147 
\hypertarget{AbstractSchema_8php_source_l00154}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a95b8986f7fa3a4e26be024d3a621e4f6}{00154}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a95b8986f7fa3a4e26be024d3a621e4f6}{\_\_construct}($name = null)
00155     \{
00156         \textcolor{keywordflow}{if} ($name) \{
00157             $this->\_name = (string) $name;
00158         \}
00159 
00160         $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a84673a5d69f10fec5b31294bf53f6d56}{refresh}();
00161 
00162         $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abdb3f6e9b394b51512ce1567bb252b63}{init}();
00163     \}
00164 
\hypertarget{AbstractSchema_8php_source_l00172}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abdb3f6e9b394b51512ce1567bb252b63}{00172}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abdb3f6e9b394b51512ce1567bb252b63}{init}()
00173     \{
00174     \}
00175 
\hypertarget{AbstractSchema_8php_source_l00181}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aafc458a7c19c74314889da4a99e457ff}{00181}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aafc458a7c19c74314889da4a99e457ff}{\_\_toString}()
00182     \{
00183         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ada5af8e6e7a4c5407b7ca67d03900b31}{toSql}();
00184     \}
00185 
\hypertarget{AbstractSchema_8php_source_l00193}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{00193}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}($name)
00194     \{
00195         \textcolor{keywordflow}{if} (!$this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ac4e121ba7932163eb1950fabe06fb9db}{\_\_isset}($name)) \{
00196             \textcolor{keywordflow}{return} null;
00197         \}
00198         \textcolor{keywordflow}{return} $this->\_params[$name];
00199     \}
00200 
\hypertarget{AbstractSchema_8php_source_l00207}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ac4e121ba7932163eb1950fabe06fb9db}{00207}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ac4e121ba7932163eb1950fabe06fb9db}{\_\_isset}($name)
00208     \{
00209         \textcolor{keywordflow}{return} array\_key\_exists($name, $this->\_params);
00210     \}
00211 
\hypertarget{AbstractSchema_8php_source_l00218}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{00218}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{\_\_set}($name, $value)
00219     \{
00220         $this->\_params[$name] = $value;
00221     \}
00222 
\hypertarget{AbstractSchema_8php_source_l00230}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a64e2e307b4dd0bf4785258f82e9fcc1b}{00230}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a64e2e307b4dd0bf4785258f82e9fcc1b}{\_\_unset}($name)
00231     \{
00232         \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ac4e121ba7932163eb1950fabe06fb9db}{\_\_isset}($name)) \{
00233             unset($this->\_params[$name]);
00234         \}
00235     \}
00236 
\hypertarget{AbstractSchema_8php_source_l00241}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aad51a69a1cfd48479c393fcab4f11257}{00241}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aad51a69a1cfd48479c393fcab4f11257}{\_\_clone}()
00242     \{
00243         $this->\_name = null;
00244 
00245         $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{\_\_set}(self::NAME\_KEY, null);
00246 
00247         $this->reload();
00248     \}
00249 
\hypertarget{AbstractSchema_8php_source_l00257}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a999c9d65aa9a31f25836aae747a10a11}{00257}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a999c9d65aa9a31f25836aae747a10a11}{getIterator}()
00258     \{
00259         \textcolor{keywordflow}{return} \textcolor{keyword}{new} ArrayIterator($this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aa057ac85212768963047e77e9bd8550c}{toArray}());
00260     \}
00261 
\hypertarget{AbstractSchema_8php_source_l00268}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_acd81590f02c831ff4c4a442c5cf47074}{00268}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_acd81590f02c831ff4c4a442c5cf47074}{setFromArray}(array $schema)
00269     \{
00270         \textcolor{keywordflow}{foreach} ($schema as $keyName => $value) \{
00271             $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{\_\_set}($keyName, $value);
00272         \}
00273 
00274         \textcolor{keywordflow}{return} $this;
00275     \}
00276 
\hypertarget{AbstractSchema_8php_source_l00282}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aa057ac85212768963047e77e9bd8550c}{00282}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aa057ac85212768963047e77e9bd8550c}{toArray}()
00283     \{
00284         \textcolor{keywordflow}{return} $this->\_params;
00285     \}
00286 
\hypertarget{AbstractSchema_8php_source_l00293}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a281403d9e41839e925bade11d8b69b91}{00293}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a281403d9e41839e925bade11d8b69b91}{setName}($name)
00294     \{
00295         $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ab4282a1fd6f4d9f23d01de8328072c71}{\_\_set}(self::NAME\_KEY, (\textcolor{keywordtype}{string}) $name);
00296         \textcolor{keywordflow}{return} $this;
00297     \}
00298 
\hypertarget{AbstractSchema_8php_source_l00304}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{00304}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}()
00305     \{
00306         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::NAME\_KEY);
00307     \}
00308 
\hypertarget{AbstractSchema_8php_source_l00314}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{00314}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}()
00315     \{
00316         \textcolor{keywordflow}{if} ($this->\_name) \{
00317             \textcolor{keywordflow}{return} $this->\_name;
00318         \}
00319         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00320     \}
00321 
\hypertarget{AbstractSchema_8php_source_l00327}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aec661ede88f500caaf2a09e98c31d3b0}{00327}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_aec661ede88f500caaf2a09e98c31d3b0}{getDropSql}()
00328     \{
00329         \textcolor{keywordflow}{if} (!$this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00330             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} \hyperlink{classZendDbSchema__Db__Schema__Exception}{ZendDbSchema\_Db\_Schema\_Exception}
      (\textcolor{stringliteral}{'Definition is not exist'});
00331         \}
00332         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abf887d2836071992af679430ddf1b922}{\_getDropSql}();
00333     \}
00334 
\hypertarget{AbstractSchema_8php_source_l00341}{}\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ada5af8e6e7a4c5407b7ca67d03900b31}{00341}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ada5af8e6e7a4c5407b7ca67d03900b31}{toSql}($alter = \textcolor{keyword}{false})
00342     \{
00343         \textcolor{keywordflow}{if} ($alter) \{
00344             \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_ae859790a91bbcb9c4dc52a6139e5999e}{isDirty}() && $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00345                 \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a2b880c7261b3f4b988f1a2b74e188c75}{\_getAlterSql}();
00346             \}
00347             \textcolor{keywordflow}{return} \textcolor{stringliteral}{''};
00348         \}
00349         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a52321b7526257809f382a28a96ab562e}{\_getCreateSql}();
00350     \}
00351 \}
\end{DoxyCode}

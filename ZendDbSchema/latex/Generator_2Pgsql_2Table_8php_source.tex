\hypertarget{Generator_2Pgsql_2Table_8php}{\section{Table.\-php}
\label{Generator_2Pgsql_2Table_8php}\index{Db/\-Schema/\-Generator/\-Pgsql/\-Table.\-php@{Db/\-Schema/\-Generator/\-Pgsql/\-Table.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table}{ZendDbSchema\_Db\_Schema\_Generator\_Pgsql\_Table}
00030     \textcolor{keyword}{implements} \hyperlink{interfaceZendDbSchema__Db__Schema__Generator__Table}{ZendDbSchema\_Db\_Schema\_Generator\_Table}
00031 \{
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00038}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a081087d005efda0190a7a8c0fffb9cbc}{00038}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a081087d005efda0190a7a8c0fffb9cbc}{createTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00039     \{
00040         $props = array();
00041         \textcolor{keywordflow}{if} ($schema->inherits) \{
00042             \textcolor{comment}{//$props [] = "INHERITS \{$schema->inherits\}";}
00043         \}
00044         \textcolor{comment}{/*}
00045 \textcolor{comment}{        if (true === $schema->oids) \{}
00046 \textcolor{comment}{            $props [] = "WITH OIDS";}
00047 \textcolor{comment}{        \} elseif (false === $schema->oids) \{}
00048 \textcolor{comment}{            $props [] = "WITHOUT OIDS";}
00049 \textcolor{comment}{        \}}
00050 \textcolor{comment}{        */}
00051         \textcolor{keywordflow}{if} ($schema->commit) \{
00052             $props [] = \textcolor{stringliteral}{"ON COMMIT \{$schema->commit\}"};
00053         \}
00054         \textcolor{keywordflow}{if} ($schema->tablespace) \{
00055             $props [] = \textcolor{stringliteral}{"TABLESPACE \{$schema->tablespace\}"};
00056         \}
00057 
00058         $columns = array();
00059         \textcolor{keywordflow}{foreach} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a214354faa96de67a26b787c2c8741850}{columns}() as $column) \{
00060             $columns[] = $column->toSql();
00061         \}
00062 
00063         $columns = array\_filter($columns);
00064         $columns = join(\textcolor{stringliteral}{', '} . PHP\_EOL, $columns);
00065 
00066         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00067         $query = array();
00068         $query[] = \textcolor{stringliteral}{"DROP TABLE IF EXISTS \{$name\}"};
00069         $query[] = \textcolor{stringliteral}{"CREATE TABLE \{$name\} ("} . PHP\_EOL
00070                  . $columns . PHP\_EOL
00071                  . \textcolor{stringliteral}{")"} . PHP\_EOL
00072                  . join(\textcolor{charliteral}{' '} . PHP\_EOL, $props);
00073 
00074         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00075     \}
00076 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00083}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a5273ef7520b31135bc524b432754762d}{00083}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a5273ef7520b31135bc524b432754762d}{alterTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00084     \{
00085         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00086             \textcolor{keywordflow}{return} null;
00087         \}
00088 
00089         $query = array();
00090 
00091         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00092         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(ZendDbSchema\_Db\_Schema\_Table::NAME\_KEY)) \{
00093             $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00094             \textcolor{keywordflow}{if} ($oldName && $oldName != $name) \{
00095                 $query[] = \textcolor{stringliteral}{"ALTER TABLE \{$oldName\} RENAME TO \{$name\}"};
00096             \}
00097         \}
00098 
00099         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(\textcolor{stringliteral}{'owner'})) \{
00100             $query[] = \textcolor{stringliteral}{"ALTER TABLE \{$name\} OWNER TO \{$schema->owner\}"};
00101         \}
00102 
00103         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(\textcolor{stringliteral}{'tablespace'})) \{
00104             $query[] = \textcolor{stringliteral}{"ALTER TABLE \{$name\} SET TABLESPACE
       \{$schema->tablespace\}"};
00105         \}
00106 
00107         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table_a21a2a75870207a989576655fec7507c3}{isDirty}(\textcolor{stringliteral}{'schema'})) \{
00108            \textcolor{comment}{// $query[] = "ALTER TABLE \{$name\} SET SCHEMA \{$schema->schema\}";}
00109         \}
00110 
00111         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00112     \}
00113 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00120}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_abfd240c872df10ff0b021ff86af52641}{00120}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_abfd240c872df10ff0b021ff86af52641}{dropTable}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $schema)
00121     \{
00122         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00123             \textcolor{keywordflow}{return} null;
00124         \}
00125         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"DROP TABLE IF EXISTS \{$schema->getOriginName()\}"};
00126     \}
00127 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00134}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ad02c019065d6f7e1e6a1ba713b6c9934}{00134}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ad02c019065d6f7e1e6a1ba713b6c9934}{\_columnSql}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00135     \{
00136         $query = array();
00137 
00138         $query[] = $schema->type;
00139 
00140         \textcolor{keywordflow}{if} ($schema->getLength()) \{
00141             $query[] = \textcolor{stringliteral}{"(\{$schema->getLength()\})"};
00142         \}
00143 
00144         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Column_aeeed5820cfc4fac67507a196e9faa638}{isNullable}()) \{
00145             $query[] = \textcolor{stringliteral}{"NOT NULL"};
00146         \} elseif (null === $schema->default) \{
00147             $query[] = \textcolor{stringliteral}{"DEFAULT NULL"};
00148         \}
00149 
00150         \textcolor{keywordflow}{if} (null !== $schema->default) \{
00151             $query[] = \textcolor{stringliteral}{"DEFAULT \{$schema->default\}"};
00152         \}
00153         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{' '}, $query);
00154     \}
00155 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00162}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a2515e55bb1085aee7149b30af1793ab0}{00162}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a2515e55bb1085aee7149b30af1793ab0}{createColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{
      ZendDbSchema\_Db\_Schema\_Table\_Column} $schema)
00163     \{
00164         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00165         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"\{$name\}"} . \textcolor{charliteral}{' '} . $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ad02c019065d6f7e1e6a1ba713b6c9934}{\_columnSql}($schema);
00166     \}
00167 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00174}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a2530efde9e464bbbcfbd166c622023d0}{00174}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a2530efde9e464bbbcfbd166c622023d0}{alterColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00175     \{
00176         \textcolor{keywordflow}{if} (!$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->isExist() || !$schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a92b77fa23ce49db1c39edcc583ec6cfe}{isDirty}
      ()) \{
00177             \textcolor{keywordflow}{return} null;
00178         \}
00179         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00180 
00181         $query = array();
00182         $prefix = \textcolor{stringliteral}{"ALTER TABLE \{$schema->getTable()->getName()\}"};
00183 
00184         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00185             $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00186             \textcolor{keywordflow}{if} ($oldName && $oldName != $name) \{
00187                 $oldName = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00188                 $query[] = $prefix . \textcolor{stringliteral}{" RENAME \{$oldName\} TO \{$name\}"};
00189             \} elseif ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a92b77fa23ce49db1c39edcc583ec6cfe}{isDirty}(\textcolor{stringliteral}{'type'}) || $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a92b77fa23ce49db1c39edcc583ec6cfe}{isDirty}
      (\textcolor{stringliteral}{'length'})) \{
00190                 $query[] = $prefix . \textcolor{stringliteral}{" ALTER \{$name\} "} . $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ad02c019065d6f7e1e6a1ba713b6c9934}{\_columnSql}
      ($schema);
00191             \}
00192         \} \textcolor{keywordflow}{else} \{
00193             $query[] = $prefix . \textcolor{stringliteral}{" ADD \{$name\} "} . $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ad02c019065d6f7e1e6a1ba713b6c9934}{\_columnSql}(
      $schema);
00194         \}
00195 
00196         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{' '}, $query);
00197     \}
00198 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00205}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a382b2a34670cc72a91832e80c64b7231}{00205}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a382b2a34670cc72a91832e80c64b7231}{dropColumn}(\hyperlink{classZendDbSchema__Db__Schema__Table__Column}{ZendDbSchema\_Db\_Schema\_Table\_Column}
       $schema)
00206     \{
00207         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00208         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00209 
00210         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"ALTER TABLE \{$table\} DROP COLUMN \{$name\}"};
00211     \}
00212 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00219}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a8bbaca639d104255bc1eeebb0c2f7da7}{00219}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a8bbaca639d104255bc1eeebb0c2f7da7}{createIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00220     \{
00221         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00222         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00223 
00224         $columns = \textcolor{stringliteral}{""};
00225         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Index_ad0edf2869c08ce408566798f4305b8dc}{getColumns}()) \{
00226             $columns = \textcolor{stringliteral}{"("} . join(\textcolor{stringliteral}{', '}, $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__Index_ad0edf2869c08ce408566798f4305b8dc}{getColumns}()) . \textcolor{stringliteral}{")"};
00227         \}
00228         $type = strtoupper($schema->type);
00229 
00230         $query = array();
00231         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00232             $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ae41ebe29e67b8bf25465242d56d2db96}{dropIndex}($schema);
00233         \}
00234         $query[] = \textcolor{stringliteral}{"CREATE \{$type\} INDEX \{$name\} ON \{$table\} \{$columns\}"};
00235 
00236         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00237     \}
00238 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00245}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_aad7fecb50c0c15801fc00e5dffc69910}{00245}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_aad7fecb50c0c15801fc00e5dffc69910}{alterIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00246     \{
00247         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a8bbaca639d104255bc1eeebb0c2f7da7}{createIndex}($schema);
00248     \}
00249 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00256}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ae41ebe29e67b8bf25465242d56d2db96}{00256}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_ae41ebe29e67b8bf25465242d56d2db96}{dropIndex}(\hyperlink{classZendDbSchema__Db__Schema__Table__Index}{ZendDbSchema\_Db\_Schema\_Table\_Index}
       $schema)
00257     \{
00258         $name   = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a55787c21deddba427842809d589c2df6}{getName}();
00259         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00260 
00261         $query = \textcolor{stringliteral}{"DROP INDEX IF EXISTS \{$name\} ON \{$table\}"};
00262         \textcolor{keywordflow}{return} $query;
00263     \}
00264 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00271}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a25c94e6add05e3ead557398dd62ae214}{00271}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a25c94e6add05e3ead557398dd62ae214}{addPrimaryKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey} 
      $schema)
00272     \{
00273         $columns = join(\textcolor{stringliteral}{', '}, $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}());
00274         $table = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00275 
00276         $query = \textcolor{stringliteral}{"ALTER TABLE \{$table\} ADD PRIMARY KEY (\{$columns\})"};
00277 
00278         \textcolor{keywordflow}{return} $query;
00279     \}
00280 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00287}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a4924a2908275086b42e3dea1865aa378}{00287}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a4924a2908275086b42e3dea1865aa378}{dropPrimaryKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey} 
      $schema)
00288     \{
00289         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00290 
00291         $query = \textcolor{stringliteral}{"ALTER TABLE \{$table\} DROP PRIMARY KEY"};
00292         \textcolor{keywordflow}{return} $query;
00293     \}
00294 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00301}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a3365ef877cee87ce2f038f4476256a94}{00301}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a3365ef877cee87ce2f038f4476256a94}{addForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00302     \{
00303         $query = array();
00304 
00305         \textcolor{keywordflow}{if} ($name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}()) \{
00306             $query[] = \textcolor{stringliteral}{"CONSTRAINT \{$name\}"};
00307         \}
00308 
00309         $columns = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}();
00310 
00311         $refColumns = join(\textcolor{charliteral}{','}, array\_values($columns));
00312         $columns = join(\textcolor{charliteral}{','}, array\_keys($columns));
00313         $refTable = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a39c9a3febcb98b77692566eed81220c7}{getReferences}();
00314 
00315         $query[] = \textcolor{stringliteral}{" FOREIGN KEY (\{$columns\}) REFERENCES \{$refTable\}
       (\{$refColumns\})"};
00316 
00317         \textcolor{keywordflow}{if} ($delete = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a83644a5b874f111e17dbf08ffa3ea803}{getOnDelete}()) \{
00318             $query[] = \textcolor{stringliteral}{" ON DELETE \{$delete\}"};
00319         \}
00320         \textcolor{keywordflow}{if} ($update = $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb55f45baab8357ce8c295e4d71bf700}{getOnUpdate}()) \{
00321             $query[] = \textcolor{stringliteral}{" ON UPDATE \{$update\}"};
00322         \}
00323 
00324         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00325 
00326         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"ALTER TABLE \{$table\} ADD "} . join(\textcolor{charliteral}{' '}, $query);
00327     \}
00328 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00335}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_af690e11fe350fcc7da00de979233e2b5}{00335}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_af690e11fe350fcc7da00de979233e2b5}{alterForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00336     \{
00337         $query = array();
00338         \textcolor{keywordflow}{if} ($schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a1680a8fd22360f74d29b641d7257a52f}{isExist}()) \{
00339             $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_aab407f272f8993d722e31c277ce0f974}{dropForeignKey}($schema);
00340         \}
00341         $query[] = $this->\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_a3365ef877cee87ce2f038f4476256a94}{addForeignKey}($schema);
00342         \textcolor{keywordflow}{return} join(\textcolor{charliteral}{';'} . PHP\_EOL, $query);
00343     \}
00344 
\hypertarget{Generator_2Pgsql_2Table_8php_source_l00351}{}\hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_aab407f272f8993d722e31c277ce0f974}{00351}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Generator__Pgsql__Table_aab407f272f8993d722e31c277ce0f974}{dropForeignKey}(
      \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey} 
      $schema)
00352     \{
00353         $table =  $schema->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getName();
00354         $name = $schema->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_adacb1417b461310c5c87f72c459c1985}{getOriginName}();
00355 
00356         $query = \textcolor{stringliteral}{"ALTER TABLE \{$table\} DROP FOREIGN KEY \{$name\}"};
00357         \textcolor{keywordflow}{return} $query;
00358     \}
00359 \}
\end{DoxyCode}

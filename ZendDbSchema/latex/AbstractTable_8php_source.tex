\hypertarget{AbstractTable_8php}{\section{Abstract\-Table.\-php}
\label{AbstractTable_8php}\index{Validate/\-Db/\-Schema/\-Abstract\-Table.\-php@{Validate/\-Db/\-Schema/\-Abstract\-Table.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{AbstractTable_8php_source_l00029}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable}{00029} \textcolor{keyword}{abstract} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable}{ZendDbSchema\_Validate\_Db\_Schema\_AbstractTable}
00030     \textcolor{keyword}{extends} \hyperlink{classZendDbSchema__Validate__Db__Schema__Chain}{ZendDbSchema\_Validate\_Db\_Schema\_Chain}
00031 \{
00037     \textcolor{keyword}{protected} $\_columnValidators = array();
00038 
00044     \textcolor{keyword}{protected} $\_indexValidators = array();
00045 
00051     \textcolor{keyword}{protected} $\_foreignKeyValidators = array();
00052 
\hypertarget{AbstractTable_8php_source_l00063}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a9d705c1888fac4470496d51389d5fb58}{00063}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a9d705c1888fac4470496d51389d5fb58}{addIndexValidator}(Zend\_Validate\_Interface 
      $validator, $breakChainOnFailure = \textcolor{keyword}{false})
00064     \{
00065         $this->\_indexValidators[] = array(
00066             \textcolor{stringliteral}{'instance'} => $validator,
00067             \textcolor{stringliteral}{'breakChainOnFailure'} => (\textcolor{keywordtype}{boolean}) $breakChainOnFailure
00068         );
00069         \textcolor{keywordflow}{return} $this;
00070     \}
00071 
\hypertarget{AbstractTable_8php_source_l00082}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a5041226725267641018040dc53413d0c}{00082}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a5041226725267641018040dc53413d0c}{addForeignKeyValidator}(
      Zend\_Validate\_Interface $validator, $breakChainOnFailure = \textcolor{keyword}{false})
00083     \{
00084         $this->\_foreignKeyValidators[] = array(
00085                 \textcolor{stringliteral}{'instance'} => $validator,
00086                 \textcolor{stringliteral}{'breakChainOnFailure'} => (\textcolor{keywordtype}{boolean}) $breakChainOnFailure
00087         );
00088         \textcolor{keywordflow}{return} $this;
00089     \}
00090 
\hypertarget{AbstractTable_8php_source_l00101}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a2da72656341bb8399423219ebae1161b}{00101}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a2da72656341bb8399423219ebae1161b}{addColumnValidator}(
      Zend\_Validate\_Interface $validator, $breakChainOnFailure = \textcolor{keyword}{false})
00102     \{
00103         $this->\_columnValidators[] = array(
00104                 \textcolor{stringliteral}{'instance'} => $validator,
00105                 \textcolor{stringliteral}{'breakChainOnFailure'} => (\textcolor{keywordtype}{boolean}) $breakChainOnFailure
00106         );
00107         \textcolor{keywordflow}{return} $this;
00108     \}
00109 
\hypertarget{AbstractTable_8php_source_l00118}{}\hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a09568c231bbb25d353f1a95ecc42146a}{00118}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Validate__Db__Schema__AbstractTable_a09568c231bbb25d353f1a95ecc42146a}{isValid}($value)
00119     \{
00120         $this->\_messages = array();
00121         $this->\_errors   = array();
00122         $result = \textcolor{keyword}{true};
00123 
00124         \textcolor{keywordflow}{if} (!$value instanceof \hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
      ) \{
00125             $this->\_messages[] = \textcolor{stringliteral}{'Value must be instance of
       ZendDbSchema\_Db\_Schema\_Table'};
00126             $this->\_errors[]   = \textcolor{stringliteral}{'tableInvalid'};
00127             \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00128         \}
00129 
00130         \textcolor{keywordflow}{foreach} ($this->\_validators as $element) \{
00131             $validator = $element[\textcolor{stringliteral}{'instance'}];
00132             \textcolor{keywordflow}{if} ($validator->isValid($value)) \{
00133                 \textcolor{keywordflow}{continue};
00134             \}
00135             $result = \textcolor{keyword}{false};
00136             $messages = $validator->getMessages();
00137             $this->\_messages = array\_merge($this->\_messages, $messages);
00138             $this->\_errors   = array\_merge($this->\_errors,   array\_keys(
      $messages));
00139             \textcolor{keywordflow}{if} ($element[\textcolor{stringliteral}{'breakChainOnFailure'}]) \{
00140                 \textcolor{keywordflow}{break};
00141             \}
00142         \}
00143 
00144         $val = \textcolor{keyword}{new} Zend\_Validate\_GreaterThan(0);
00145         \textcolor{keywordflow}{if} (!$val->isValid(count($value->columns()))) \{
00146             $result = \textcolor{keyword}{false};
00147             $messages =  array(\textcolor{stringliteral}{'columnsEmpty'} => \textcolor{stringliteral}{'Must be at least 1 column in
       table'});
00148             $this->\_messages = array\_merge($this->\_messages, $messages);
00149             $this->\_errors   = array\_merge($this->\_errors,   array\_keys(
      $messages));
00150         \}
00151 
00152         \textcolor{keywordflow}{foreach} ($value->columns() as $column) \{
00153             \textcolor{keywordflow}{foreach} ($this->\_columnValidators as $element) \{
00154                 $validator = $element[\textcolor{stringliteral}{'instance'}];
00155                 \textcolor{keywordflow}{if} ($validator->isValid($column)) \{
00156                     \textcolor{keywordflow}{continue};
00157                 \}
00158                 $result = \textcolor{keyword}{false};
00159                 $messages = $validator->getMessages();
00160                 $this->\_messages = array\_merge($this->\_messages, $messages);
00161                 $this->\_errors   = array\_merge($this->\_errors,   array\_keys(
      $messages));
00162                 \textcolor{keywordflow}{if} ($element[\textcolor{stringliteral}{'breakChainOnFailure'}]) \{
00163                     \textcolor{keywordflow}{break};
00164                 \}
00165             \}
00166         \}
00167 
00168         \textcolor{keywordflow}{foreach} ($value->indexes() as $index) \{
00169             \textcolor{keywordflow}{foreach} ($this->\_indexValidators as $element) \{
00170                 $validator = $element[\textcolor{stringliteral}{'instance'}];
00171                 \textcolor{keywordflow}{if} ($validator->isValid($index)) \{
00172                     \textcolor{keywordflow}{continue};
00173                 \}
00174                 $result = \textcolor{keyword}{false};
00175                 $messages = $validator->getMessages();
00176                 $this->\_messages = array\_merge($this->\_messages, $messages);
00177                 $this->\_errors   = array\_merge($this->\_errors,   array\_keys(
      $messages));
00178                 \textcolor{keywordflow}{if} ($element[\textcolor{stringliteral}{'breakChainOnFailure'}]) \{
00179                     \textcolor{keywordflow}{break};
00180                 \}
00181             \}
00182         \}
00183 
00184         \textcolor{keywordflow}{foreach} ($value->foreigns() as $foreign) \{
00185             \textcolor{keywordflow}{foreach} ($this->\_indexValidators as $element) \{
00186                 $validator = $element[\textcolor{stringliteral}{'instance'}];
00187                 \textcolor{keywordflow}{if} ($validator->isValid($foreign)) \{
00188                     \textcolor{keywordflow}{continue};
00189                 \}
00190                 $result = \textcolor{keyword}{false};
00191                 $messages = $validator->getMessages();
00192                 $this->\_messages = array\_merge($this->\_messages, $messages);
00193                 $this->\_errors   = array\_merge($this->\_errors,   array\_keys(
      $messages));
00194                 \textcolor{keywordflow}{if} ($element[\textcolor{stringliteral}{'breakChainOnFailure'}]) \{
00195                     \textcolor{keywordflow}{break};
00196                 \}
00197             \}
00198         \}
00199         \textcolor{keywordflow}{return} $result;
00200     \}
00201 \}
\end{DoxyCode}

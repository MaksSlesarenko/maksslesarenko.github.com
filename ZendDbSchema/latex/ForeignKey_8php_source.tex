\hypertarget{ForeignKey_8php}{\section{Foreign\-Key.\-php}
\label{ForeignKey_8php}\index{Db/\-Schema/\-Table/\-Foreign\-Key.\-php@{Db/\-Schema/\-Table/\-Foreign\-Key.\-php}}
}

\begin{DoxyCode}
00001 <?php
\hypertarget{ForeignKey_8php_source_l00029}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{00029} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey}{ZendDbSchema\_Db\_Schema\_Table\_ForeignKey}
00030     \textcolor{keyword}{extends} \hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition}{ZendDbSchema\_Db\_Schema\_Table\_AbstractDefinition}
00031 \{
00032     \textcolor{keyword}{const} COLUMNS\_KEY   = \textcolor{stringliteral}{'columns'};
00033     \textcolor{keyword}{const} REFERENCE\_KEY = \textcolor{stringliteral}{'references'};
00034     \textcolor{keyword}{const} ONDELETE\_KEY  = \textcolor{stringliteral}{'delete'};
00035     \textcolor{keyword}{const} ONUPDATE\_KEY  = \textcolor{stringliteral}{'update'};
00036 
\hypertarget{ForeignKey_8php_source_l00042}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ad6d46e4848466e60cdcfc327e642d97e}{00042}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ad6d46e4848466e60cdcfc327e642d97e}{\_getSchemaKey}()
00043     \{
00044         \textcolor{keywordflow}{return} ZendDbSchema\_Db\_Schema\_Table::FOREIGNS\_KEY;
00045     \}
00046 
\hypertarget{ForeignKey_8php_source_l00050}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_af8a9854e00b6cb81885bfce513ef022c}{00050}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_af8a9854e00b6cb81885bfce513ef022c}{\_getDropSql}()
00051     \{
00052         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->dropForeignKey($this)
      ;
00053     \}
00054 
\hypertarget{ForeignKey_8php_source_l00058}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ae7cb55b4ec471ccb54ef38ef4bb33558}{00058}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ae7cb55b4ec471ccb54ef38ef4bb33558}{\_getAlterSql}()
00059     \{
00060         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->alterForeignKey($this
      );
00061     \}
00062 
\hypertarget{ForeignKey_8php_source_l00066}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a8b8ab754bf3b5bcda1e8c70e83a6b7b9}{00066}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a8b8ab754bf3b5bcda1e8c70e83a6b7b9}{\_getCreateSql}()
00067     \{
00068         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->addForeignKey($this);
00069     \}
00070 
\hypertarget{ForeignKey_8php_source_l00077}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a333403da95af60a2b4bd18952d1136f3}{00077}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a333403da95af60a2b4bd18952d1136f3}{setReferences}($table)
00078     \{
00079         \textcolor{keywordflow}{if} (!$table instanceof \hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
      ) \{
00080             $table = \textcolor{keyword}{new} ZendDbSchema\_Db\_Schema\_Table($table);
00081         \}
00082 
00083         \textcolor{keywordflow}{if} (!$table->isExist()) \{
00084             \textcolor{keywordflow}{throw} \textcolor{keyword}{new} \hyperlink{classZendDbSchema__Db__Schema__Exception}{ZendDbSchema\_Db\_Schema\_Exception}
      (\textcolor{stringliteral}{'Cannot set reference to not existing table'});
00085         \}
00086 
00087         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a65498451683b2cf8fd1dc65f7f03581d}{\_\_set}(self::REFERENCE\_KEY, $table->getOriginName());
00088         \textcolor{keywordflow}{return} $this;
00089     \}
00090 
\hypertarget{ForeignKey_8php_source_l00096}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a39c9a3febcb98b77692566eed81220c7}{00096}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a39c9a3febcb98b77692566eed81220c7}{getReferences}()
00097     \{
00098         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::REFERENCE\_KEY);
00099     \}
00100 
\hypertarget{ForeignKey_8php_source_l00107}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb0c42af85a63c6347973ce79d2e7d80}{00107}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb0c42af85a63c6347973ce79d2e7d80}{setColumns}(array $columns)
00108     \{
00109         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a65498451683b2cf8fd1dc65f7f03581d}{\_\_set}(self::COLUMNS\_KEY, $columns);
00110         \textcolor{keywordflow}{return} $this;
00111     \}
00112 
\hypertarget{ForeignKey_8php_source_l00119}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a275e68bc4f9eebe1af1ec77e6d0b731e}{00119}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a275e68bc4f9eebe1af1ec77e6d0b731e}{hasColumn}($columnName)
00120     \{
00121         \textcolor{keywordflow}{return} array\_key\_exists($columnName, $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}());
00122     \}
00123 
\hypertarget{ForeignKey_8php_source_l00130}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ab37a34d3b9b9913fddc255471eb79c00}{00130}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ab37a34d3b9b9913fddc255471eb79c00}{hasRefColumn}($refColumnName)
00131     \{
00132         $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}();
00133         \textcolor{keywordflow}{return} in\_array($refColumnName, $columns);
00134     \}
00135 
\hypertarget{ForeignKey_8php_source_l00143}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_acad90fc706fe3c4aa734b073fa551152}{00143}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_acad90fc706fe3c4aa734b073fa551152}{setColumn}($columnName, $refColumnName)
00144     \{
00145         $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}();
00146         $columns[$columnName] = $refColumnName;
00147         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb0c42af85a63c6347973ce79d2e7d80}{setColumns}($columns);
00148 
00149         \textcolor{keywordflow}{return} $this;
00150     \}
00151 
\hypertarget{ForeignKey_8php_source_l00157}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{00157}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}()
00158     \{
00159         $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::COLUMNS\_KEY);
00160 
00161         \textcolor{keywordflow}{return} is\_array($columns) ? $columns : array();
00162     \}
00163 
\hypertarget{ForeignKey_8php_source_l00170}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a810c76bf8102391ec3d304647c369146}{00170}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a810c76bf8102391ec3d304647c369146}{removeColumn}($columnName)
00171     \{
00172         \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a275e68bc4f9eebe1af1ec77e6d0b731e}{hasColumn}($columnName)) \{
00173             $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a5cd45e4bc92ac5975975753e459b4c8c}{getColumns}();
00174             unset($columns[$columnName]);
00175             $this->\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb0c42af85a63c6347973ce79d2e7d80}{setColumns}($columns);
00176         \}
00177         \textcolor{keywordflow}{return} $this;
00178     \}
00179 
\hypertarget{ForeignKey_8php_source_l00186}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a0c51ff09d6df59b68f8f5ff4ec1ed32d}{00186}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a0c51ff09d6df59b68f8f5ff4ec1ed32d}{setOnDelete}($onDelete)
00187     \{
00188         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a65498451683b2cf8fd1dc65f7f03581d}{\_\_set}(self::ONDELETE\_KEY, $onDelete);
00189         \textcolor{keywordflow}{return} $this;
00190     \}
00191 
\hypertarget{ForeignKey_8php_source_l00197}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a83644a5b874f111e17dbf08ffa3ea803}{00197}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_a83644a5b874f111e17dbf08ffa3ea803}{getOnDelete}()
00198     \{
00199         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::ONDELETE\_KEY);
00200     \}
00201 
00202 
\hypertarget{ForeignKey_8php_source_l00209}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ae8ffd9c6bad60eaf6ef05cdd1f5c56fb}{00209}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_ae8ffd9c6bad60eaf6ef05cdd1f5c56fb}{setOnUpdate}($onUpdate)
00210     \{
00211         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a65498451683b2cf8fd1dc65f7f03581d}{\_\_set}(self::ONUPDATE\_KEY, $onUpdate);
00212         \textcolor{keywordflow}{return} $this;
00213     \}
00214 
\hypertarget{ForeignKey_8php_source_l00220}{}\hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb55f45baab8357ce8c295e4d71bf700}{00220}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__ForeignKey_afb55f45baab8357ce8c295e4d71bf700}{getOnUpdate}()
00221     \{
00222         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::ONUPDATE\_KEY);
00223     \}
00224 \}
\end{DoxyCode}

\hypertarget{PrimaryKey_8php}{\section{Primary\-Key.\-php}
\label{PrimaryKey_8php}\index{Db/\-Schema/\-Table/\-Primary\-Key.\-php@{Db/\-Schema/\-Table/\-Primary\-Key.\-php}}
}

\begin{DoxyCode}
00001 <?php
00002 
\hypertarget{PrimaryKey_8php_source_l00003}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{00003} \textcolor{keyword}{class }\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey}{ZendDbSchema\_Db\_Schema\_Table\_PrimaryKey}
00004     \textcolor{keyword}{extends} \hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition}{ZendDbSchema\_Db\_Schema\_Table\_AbstractDefinition}
00005 \{
00006     \textcolor{keyword}{const} COLUMNS\_KEY   = \textcolor{stringliteral}{'columns'};
00007     \textcolor{keyword}{const} TYPE\_KEY      = \textcolor{stringliteral}{'type'};
00008 
\hypertarget{PrimaryKey_8php_source_l00014}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_ab6773d42e5dfebc2273db8b93556f343}{00014}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_ab6773d42e5dfebc2273db8b93556f343}{\_getSchemaKey}()
00015     \{
00016         \textcolor{keywordflow}{return} ZendDbSchema\_Db\_Schema\_Table::PRIMARY\_KEY;
00017     \}
00018 
\hypertarget{PrimaryKey_8php_source_l00022}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a5d6a6e6e9b5772601a0592fd6bfd81b2}{00022}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a5d6a6e6e9b5772601a0592fd6bfd81b2}{\_getDropSql}()
00023     \{
00024         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->dropPrimaryKey($this)
      ;
00025     \}
00026 
\hypertarget{PrimaryKey_8php_source_l00030}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a3f48dd085068f13258957efeb0f7257b}{00030}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a3f48dd085068f13258957efeb0f7257b}{\_getAlterSql}()
00031     \{
00032         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->alterPrimaryKey($this
      );
00033     \}
00034 
\hypertarget{PrimaryKey_8php_source_l00038}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97fe22c0e5758e1ee04616ccf3218e2a}{00038}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97fe22c0e5758e1ee04616ccf3218e2a}{\_getCreateSql}()
00039     \{
00040         \textcolor{keywordflow}{return} $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getGenerator()->addPrimaryKey($this);
00041     \}
00042 
\hypertarget{PrimaryKey_8php_source_l00050}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a8189591ab7ced58307298ecc8f27779d}{00050}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a8189591ab7ced58307298ecc8f27779d}{\_\_construct}(\hyperlink{classZendDbSchema__Db__Schema__Table}{ZendDbSchema\_Db\_Schema\_Table}
       $table = null)
00051     \{
00052         \textcolor{keywordflow}{if} ($table) \{
00053             $this->\_table = $table;
00054             $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a84673a5d69f10fec5b31294bf53f6d56}{refresh}();
00055         \}
00056 
00057         $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_abdb3f6e9b394b51512ce1567bb252b63}{init}();
00058     \}
00059 
\hypertarget{PrimaryKey_8php_source_l00065}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_afdfa6a0c9057c00d4c3074feba837586}{00065}     \textcolor{keyword}{protected} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_afdfa6a0c9057c00d4c3074feba837586}{\_getCleanSchema}()
00066     \{
00067         $schema = array();
00068         \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()) \{
00069             $data = $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a224b6a0c1df1d6ed40e03657782ef6fc}{getTable}()->getCleanSchema();
00070 
00071             \textcolor{keywordflow}{if} (isset($data[$this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_ab6773d42e5dfebc2273db8b93556f343}{\_getSchemaKey}()])) \{
00072                 $schema = $data[$this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_ab6773d42e5dfebc2273db8b93556f343}{\_getSchemaKey}()];
00073             \}
00074         \}
00075         \textcolor{keywordflow}{return} $schema;
00076     \}
00077 
\hypertarget{PrimaryKey_8php_source_l00084}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a01cfcffd92c38bc521628d49d5c74927}{00084}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a01cfcffd92c38bc521628d49d5c74927}{setColumns}(array $columns)
00085     \{
00086         $this->\hyperlink{classZendDbSchema__Db__Schema__Table__AbstractDefinition_a65498451683b2cf8fd1dc65f7f03581d}{\_\_set}(self::COLUMNS\_KEY, array\_unique($columns));
00087         \textcolor{keywordflow}{return} $this;
00088     \}
00089 
\hypertarget{PrimaryKey_8php_source_l00096}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97ed55c2479299d4e75e98154f12c409}{00096}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97ed55c2479299d4e75e98154f12c409}{hasColumn}($columnName)
00097     \{
00098         \textcolor{keywordflow}{return} in\_array($columnName, $this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}());
00099     \}
00100 
\hypertarget{PrimaryKey_8php_source_l00107}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a0b84ee828c689a3da5790e123583f691}{00107}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a0b84ee828c689a3da5790e123583f691}{addColumn}($columnName)
00108     \{
00109         \textcolor{keywordflow}{if} (!$this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97ed55c2479299d4e75e98154f12c409}{hasColumn}($columnName)) \{
00110             $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}();
00111             $columns[] = $columnName;
00112             $this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a01cfcffd92c38bc521628d49d5c74927}{setColumns}($columns);
00113         \}
00114         \textcolor{keywordflow}{return} $this;
00115     \}
00116 
\hypertarget{PrimaryKey_8php_source_l00122}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{00122}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}()
00123     \{
00124         $columns = $this->\hyperlink{classZendDbSchema__Db__Schema__AbstractSchema_a54d32c6f15463eaad2321a9f0e7225d7}{\_\_get}(self::COLUMNS\_KEY);
00125         \textcolor{keywordflow}{return} is\_array($columns) ? $columns : array();
00126     \}
00127 
\hypertarget{PrimaryKey_8php_source_l00134}{}\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a6deb586d1cc0935f5c0d50afa47667de}{00134}     \textcolor{keyword}{public} \textcolor{keyword}{function} \hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a6deb586d1cc0935f5c0d50afa47667de}{removeColumn}($columnName)
00135     \{
00136         \textcolor{keywordflow}{if} ($this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a97ed55c2479299d4e75e98154f12c409}{hasColumn}($columnName)) \{
00137             $columns = array\_flip($this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a228207d6e07e3ab95b8b25415077a6a1}{getColumns}());
00138             unset($columns[$columnName]);
00139             $this->\hyperlink{classZendDbSchema__Db__Schema__Table__PrimaryKey_a01cfcffd92c38bc521628d49d5c74927}{setColumns}(array\_flip($columns));
00140         \}
00141         \textcolor{keywordflow}{return} $this;
00142     \}
00143 \}
\end{DoxyCode}
